(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{291:function(e,t,n){Promise.resolve().then(n.bind(n,1523)),Promise.resolve().then(n.bind(n,49)),Promise.resolve().then(n.bind(n,623)),Promise.resolve().then(n.t.bind(n,5260,23))},623:function(e,t,n){"use strict";n.r(t);var r=n(7437),o=n(2265),l=n(7295),a=n.n(l),i=n(5260),u=n.n(i);t.default=()=>{let e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,o.useRef)(new Image),l=(0,o.useRef)(null),[i,d]=(0,o.useState)([]);(0,o.useEffect)(()=>{let n=new(a()).Stage({container:"container",width:600});e.current=n;let r=new(a()).Layer;n.add(r),t.current=r;let o=new(a()).Transformer({rotateEnabled:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:(e,t)=>t.width<20||t.height<20?e:t});r.add(o),l.current=o},[]);let c=e=>{let n=new Image;n.src=e,n.onload=()=>{var e,r,o,i;let u=n.width/n.height,c=new(a()).Image({image:n,x:50,y:50,width:100*u,height:100,draggable:!0}),m=new(a()).Text({text:"X",fontSize:20,fill:"red",visible:!1,draggable:!1});m.on("click",()=>{h(c,m)}),c.on("transform",()=>{s(c,m)}),c.on("dragmove",()=>{s(c,m)}),c.on("click",()=>{var e,n,r,o;d(e=>(e.forEach(e=>{let t=e.getAttr("removeButton");t&&t!==m&&t.visible(!1)}),e)),null===(e=l.current)||void 0===e||e.nodes([c]),null===(r=l.current)||void 0===r||null===(n=r.getLayer())||void 0===n||n.batchDraw(),m.visible(!0),s(c,m),m.moveToTop(),null===(o=t.current)||void 0===o||o.batchDraw()}),c.setAttr("removeButton",m),null===(e=t.current)||void 0===e||e.add(m),null===(r=t.current)||void 0===r||r.add(c),null===(o=t.current)||void 0===o||o.draw(),d(e=>[...e,c]),null===(i=l.current)||void 0===i||i.moveToTop()}},s=(e,t)=>{t.position({x:e.x()+e.width()*e.scaleX(),y:e.y()-20})};(0,o.useEffect)(()=>{let n=e.current;n&&n.on("click",e=>{if(e.target===n){var r,o;null===(r=l.current)||void 0===r||r.nodes([]),i.forEach(e=>{let t=e.getAttr("removeButton");t&&t.visible(!1)}),null===(o=t.current)||void 0===o||o.batchDraw()}})},[i]);let h=(e,n)=>{var r,o;e.remove(),n.remove(),null===(r=l.current)||void 0===r||r.detach(),null===(o=t.current)||void 0===o||o.draw(),d(t=>t.filter(t=>t!==e))};return(0,r.jsxs)("div",{className:u().container,children:[(0,r.jsx)("h1",{children:"Image Editor"}),(0,r.jsxs)("form",{id:"upload-form",children:[(0,r.jsx)("input",{type:"file",id:"image-upload",accept:"image/*",onChange:r=>{let o=r.target.files;if(!o)return;let i=o[0],u=new FileReader;u.onload=function(r){r.target&&"string"==typeof r.target.result&&(n.current.src=r.target.result),n.current.onload=function(){var r,o,i,u,d;let c=600*n.current.height/n.current.width,s=new(a()).Image({image:n.current,x:0,y:0,width:600,height:c});null===(r=t.current)||void 0===r||r.add(s),null===(o=e.current)||void 0===o||o.width(600),null===(i=e.current)||void 0===i||i.height(c),null===(u=t.current)||void 0===u||u.draw(),null===(d=l.current)||void 0===d||d.moveToTop()}},u.readAsDataURL(i)},className:u().hiddenFileInput}),(0,r.jsx)("label",{htmlFor:"image-upload",className:u().uploadLabel,children:"Upload Image"})]}),(0,r.jsx)("div",{id:"container",className:u().canvasContainer}),(0,r.jsx)("button",{className:u().exportButton,onClick:()=>c("/crown.png"),children:"Add Crown"}),(0,r.jsx)("button",{className:u().exportButton,onClick:()=>c("/red-saber.png"),children:"Add Red Saber"}),(0,r.jsx)("button",{className:u().exportButton,onClick:()=>c("/green-saber.png"),children:"Add Green Saber"}),(0,r.jsx)("button",{className:u().exportButton,onClick:()=>{if(e.current&&l.current){var t,n;l.current.nodes([]),i.forEach(e=>{let t=e.getAttr("removeButton");t&&t.visible(!1)}),null===(t=l.current.getLayer())||void 0===t||t.batchDraw();let r=e.current.toDataURL();i.forEach(e=>{let t=e.getAttr("removeButton");t&&t.visible(!1)}),null===(n=l.current.getLayer())||void 0===n||n.batchDraw();let o=document.createElement("a");o.download="edited-image.png",o.href=r,o.click()}},children:"Export Image"})]})}},5260:function(e){e.exports={container:"Home_container__9OuOz",canvasContainer:"Home_canvasContainer__MycKm",uploadButton:"Home_uploadButton__MS9tg",exportButton:"Home_exportButton__Kb85M",hiddenFileInput:"Home_hiddenFileInput__LWtaR",uploadLabel:"Home_uploadLabel__M1M9C"}}},function(e){e.O(0,[132,611,971,117,744],function(){return e(e.s=291)}),_N_E=e.O()}]);